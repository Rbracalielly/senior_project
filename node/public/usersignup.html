<html>
<head>
  <title>Calorie Calculator</title>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

</head>

<script>
  // signin using credintials in server
  $(document).ready(function() {
    $("#signin_user_login").click(function() {

      var email = document.getElementById("userEmail").value;
      var password = document.getElementById("userPassword").value;
      //debugging
      console.log("test: " + password);
      doLogin({ // this is the input (first argument of doLogin)
        email: email,
        password: password
      }, function(err) { // this is the callback (second argument of doLogin)
        // this function gets called after the ajax request completes
        if (err) {
          alert("Login failed: " + err);
        } else {
          alert("Login success!");
          // ... and navigate to other page

          location = "/userinformationpage.html"
        }
      });
    });
  });

  function doLogin(input, callback) {
    console.log("test");
        // make an ajax request to the server to save the calories information
        $.ajax({
          type: "POST",
          url: "user_login",
          data: JSON.stringify(input),
          success: function(json) {
            //console.log(JSON.stringify(json));
            if (!json.success) {
              callback(json.message);
            } else {
              callback();
            }
          },
          error: function(textStatus, errorThrown) {
            callback("Request failed");
          }
        });
      }
</script>

<script>
// capture when the user clicks the daily caloric intake button
$(document).ready(function(){
$("#user_account_creation").click(function() {
  //debuging
  console.log("test");
  // get daily calories
  var userCreationInfo = [];
  // we need to loop because there are multiple rows in the table

  for (var i = 0; i < 17; i++) {
    userCreationInfo.push($("#user_information_" + i).val());
  }

  addUserCreationInfo({ // this is the input (first argument of userCreationInfo)
    userCreationInfo

  }, function(err) { // this is the callback (second argument of userCreationInfo)
    // this function gets called after the ajax request completes
    if (err) {
      alert("Adding user failed: " + err);
    }
    else {
      alert("Added user!");
      // ... and navigate to other page
			//not sure where to nav to here?
			//id assume the best place would be the user information page again
    }
  });
  return false;
});
});
function addUserCreationInfo(userCreationInfo, callback) {
  // make an ajax request to the server to save the calories information
  $.ajax({
    type: "POST",
    url: "add_new_user",
    data: JSON.stringify(userCreationInfo),
    success: function(json) {
      //console.log(JSON.stringify(json));
      if (!json.success) {
        callback(json.message);
      }
      else {
        callback();
      }
    },
    error: function (textStatus, errorThrown) {
       callback("Request failed");
    }
  });
}

</script>

<script>

//Function to Hide and Show the sign-up form.
$(document).ready(function() {
var Target = document.getElementById('show_create_account');

$("#user_account_creation").click(function() {
  Target.style.display = 'block';
});

$("#cancel_user_account_creation").click(function() {
  Target.style.display = 'none';
});


$("#cancel_user_login").click(function() {
  history.go(-1);
});

});


</script>


<body>


<!-- Added Color -->

  <body bgcolor="#85C1E9">
  </body>

  <picture>
    <source media="(min-width: 100px)" srcset="Fitness Picture 1.jpg">
    <img src="FitnessPicture1.jpg" style="width:600px;height:400px">
  </picture>

<!-- Adding Space for Avatar to line up -->
  <p>
  </p>

<!-- Create Table -->

  <!-- Start -->
  <tr>
    <td>



    <img class="mb-4" src="https://i.postimg.cc/Z5cWLm0z/avatar-png-transparent-4.png" alt="" width="72" height="72">
		<h1 class="h3 mb-3 font-weight-normal">Account Login</h1>

    <!-- Enter User Email -->
		<label for="user_email" class="sr-only">Email address</label>
		<input type="email" id="userEmail" class="form-control" placeholder="Email address" required autofocus>
    <br>

    <!-- Enter User Password -->
    <label for="user_pasword" class="sr-only">Password</label>
		<input type="password" id="userPassword" class="form-control" placeholder="Password" required>

    <!-- User Remember Sign In Checkbox -->
		<div class="checkbox mb-3">
		  <label>
		  <input type="checkbox" value="remember-me"> Stay Signed In
		  </label>
		</div>

    <!-- User Sign In Or Canels Login -->
		<button class="btn btn-lg btn-primary btn-block" type="submit" id="signin_user_login">Sign in</button>
		<button class="btn btn-lg btn-primary btn-block" type="reset" id="cancel_user_login">Cancel</button>

	  </td>
  </tr>
  <!-- End -->
  <!-------------------------------------------------------------------------------------------------------------------->
  <!-------------------------------------------------------------------------------------------------------------------->
  <!-------------------------------------------------------------------------------------------------------------------->

  <!-- Start -->
  <tr>
	 <td>
	  <div class="hide_show_create_account_information" id="show_create_account">
		<table id="userInformationTabe">
    <tr>
		<td>
		<label for="email"><b>User Name</b></label>
		<input type="text" placeholder="User Name" name="userName" id = "user_information_0"required>
	 </td>
  </tr>


  <!-- Start -->
	<tr>
	  <td>
		<label for="email"><b>Email</b></label>
		<input type="text" placeholder="Enter Email" name="userEmail" id = "user_information_1" required>
	  </td>
  </tr>
  <!-- End -->

  <!-- Start -->
  <tr>
		<td>
    <label for="confirm"><b>Password</b></label>
		<input type="password" placeholder="Enter Password" name="userPassword" id = "user_information_2" required>
		</td>
  </tr>
  <!-- End -->

  <!-- Start -->
  <tr>
		<td>
    <label for="confirm"><b>Secret Question</b></label>
		<input type="text" placeholder="Enter A Question" name="userSecretQuestion" id = "user_information_3" required>
		</td>
  </tr>
  <!-- End -->

  <!-- Start -->
  <tr>
    <td>
    <label for="confirm"><b>Secret Question Answer</b></label>
    <input type="text" placeholder="Enter An Answeer To The Above Question" name="userAnswer" id = "user_information_4" required>
    </td>
  </tr>
  <!-- End -->

  <!-- Start -->
  <tr>
    <td>
    <label for="confirm"><b>Steet Address</b></label>
    <input type="text" placeholder="Enter Street Address" name="UserStreetAddress" id = "user_information_5" required>
    </td>
  </tr>
  <!-- End -->

  <!-- Start -->
  <tr>
    <td>
    <label for="confirm"><b>City</b></label>
    <input type="text" placeholder="Enter City" name="userCity" id = "user_information_6" required>
    </td>
  </tr>
  <!-- End -->

  <!-- Start -->
  <tr>
    <td>
    <label for="confirm"><b>State</b></label>
    <input type="text" placeholder="Enter State" name="userState" id = "user_information_7" required>
    </td>
  </tr>
  <!-- End -->

  <!-- Start -->
  <tr>
    <td>
    <label for="confirm"><b>Zip</b></label>
    <input type="text" placeholder="Enter Zip" name="userZip" id = "user_information_8" required>
    </td>
  </tr>
  <!-- End -->

  <!-- Start -->
  <tr>
    <td>
    <label for="confirm"><b>Date of Birth (Example: 1991-04-13)</b></label>
    <input type="text" placeholder="Enter DOB" name="userDateOfBirth" id = "user_information_9" required>
    </td>
  </tr>
  <!-- End -->

  <!-- Start -->


  <tr>
    <td>
      <label>Gender:</label><br>
      <input type="radio" id="user_information_10" name="gender" value="M">
    	<label for="male">Male</label><br>
    	<input type="radio" id="user_information_10" name="gender" value="F">
    	<label for="female">Female</label><br>
    	<input type="radio" id="user_information_10" name="gender" value="O">
    	<label for="other">Other</label><br><br>
    </td>
  </tr>



  <!-- End -->

  <!-- Start -->
  <tr>
    <td>
    <label for="confirm"><b>BMI</b></label>
    <input type="text" placeholder="Enter BMI" name="userBMI" id = "user_information_11" required>
    </td>
  </tr>
  <!-- End -->

  <!-- Start -->
  <tr>
    <td>
    <label for="confirm"><b>Weight</b></label>
    <input type="text" placeholder="Enter Weight" name="userWeight" id = "user_information_12" required>
    </td>
  </tr>
  <!-- End -->

  <!-- Start -->
  <tr>
    <td>
      <label for="confirm"><b>Height (In Inches)</b></label>
      <input type="text" placeholder="Enter Height" name="userHeight" id = "user_information_13"  required>
    </td>
  </tr>
  <!-- End -->

  <!-- Start -->
  <tr>
    <td>
      <label>Exercise Level:</label><br>
      <input type="radio" id="user_information_14" name="exercise" value="Light: Exercise 1-3 times/week">
    	<label for="Light: Exercise 1-3 times/week">Light: Exercise 1-3 times/week</label><br>
    	<input type="radio" id="user_information_14" name="exercise" value="Moderate: Exercise 4-5 times/week">
    	<label for="Moderate: Exercise 4-5 times/week<">Moderate: Exercise 4-5 times/week</label><br>
    	<input type="radio" id="user_information_14" name="exercise" value="Active: Daily exercise or intens excercise 3-4 times/week">
    	<label for="Active: Daily exercise or intens excercise 3-4 times/week">Active: Daily exercise or intens excercise 3-4 times/week</label><br><br>
    </td>
  </tr>




  <!-- End -->

  <!-- Start -->
  <tr>
    <td>
    <label for="confirm"><b>Calorie Limit</b></label>
    <input type="text" placeholder="Enter Calorie Limit" name="userCalorieLimit" id = "user_information_15"  required>
    </td>
  </tr>
  <!-- End -->

  <!-- Start -->
  <tr>
    <td>
    <label for="confirm"><b>Calorie Goal</b></label>
    <input type="text" placeholder="Enter Calorie Goal" name="userCalorieGoal" id = "user_information_16"  required>
    </td>
  </tr>
  <!-- End -->

	</table>
	</div>
	</td>
  </tr>
<!-- End -->
<input type="submit" value="Submit User Info" id="user_account_creation">



</body>
</html>
